<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-resources/Rollup Architecture" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Rollup Architecture | BitcoinZK Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.bitcoinzk.io/resources/Rollup Architecture"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Rollup Architecture | BitcoinZK Docs"><meta data-rh="true" name="description" content="ArchOverview"><meta data-rh="true" property="og:description" content="ArchOverview"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.bitcoinzk.io/resources/Rollup Architecture"><link data-rh="true" rel="alternate" href="https://docs.bitcoinzk.io/resources/Rollup Architecture" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.bitcoinzk.io/resources/Rollup Architecture" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.875fa59e.css">
<script src="/assets/js/runtime~main.bccabb65.js" defer="defer"></script>
<script src="/assets/js/main.7e39cbd1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="BitcoinZK Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="BitcoinZK Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">BitcoinZK</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title-first">General</li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">About BitcoinZK</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/general/Key Features">Key Features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/general/FAQs">FAQs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title">Learn</li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/resources/L2 for Bitcoin">L2 for Bitcoin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/resources/Zero-knowledge">Zero-Knowledge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/resources/Rollup Architecture">Rollup Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/resources/ZK Asset Bridge">ZK Asset Bridge</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title">Use</li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/resources/Deposit">Deposit BTC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/resources/Withdraw">Withdraw BTC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 sidebar-title">Build</li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/resources/repositories">Repositories</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/developers/connecting-to-bitcoinzk">Connecting to BitcoinZK</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Rollup Architecture</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Rollup Architecture</h1>
<p><img decoding="async" loading="lazy" alt="ArchOverview" src="/assets/images/ArchOverview-26a1d14da9887fd3376127ac3d6c37fc.png" width="1542" height="1138" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-concepts">Basic Concepts<a href="#basic-concepts" class="hash-link" aria-label="Direct link to Basic Concepts" title="Direct link to Basic Concepts">​</a></h2>
<p>This is an important part for understanding the whole design of bitcoinZK. As Sovereign Rollup being a highly vague concept, we will articulate our insights into the L2/Rollup architecture and our actual design.</p>
<p>If accurately defined, bitcoinZK is a ZK-featured, sovereign style, rollup-like Layer2 for Bitcoin.</p>
<p>The purpose of a Bitcoin L2, in a nutshell, is to scale Bitcoin (L1), in terms of performance (higher throughput, lower fees) or capability (L2 achieves what L1 cannot do, e.g. Turing-complete smart contracts for Bitcoin). Any network that meets such purpose can be defined as a Bitcoin L2.</p>
<p>The concept of Rollup, however, is slightly different. Rollup is more of a specific implementation method for a L2 network where L2 nodes execute Txs and submit the data to L1 for state finality. Note that, however, L2 does not necessarily have to be implemented with Rollup because there are other ways to scale L1 besides Rollup. Rollup is heated discussed because the Ethereum ecosystem has chosen a &quot;Rollup-centric&quot; development roadmap (compared to previous solutions i.e. Plasma, state channels) for its scaling issue and this primitive has been somehow migrated to the Bitcoin scaling solutions today.</p>
<p>Further, we tend to use the term &quot;Sovereign-style &amp; Rollup-like&quot; to better describe bitcoinZK as an implementation of Bitcoin L2 because we believe they are currently the closest definitions we can find from the market. In fact, the design of bitcoinZK differs from any other existing L2s.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bitcoinzk-rollup-anatomy">BitcoinZK Rollup Anatomy<a href="#bitcoinzk-rollup-anatomy" class="hash-link" aria-label="Direct link to BitcoinZK Rollup Anatomy" title="Direct link to BitcoinZK Rollup Anatomy">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="l2-and-rollup-explained">L2 and Rollup Explained<a href="#l2-and-rollup-explained" class="hash-link" aria-label="Direct link to L2 and Rollup Explained" title="Direct link to L2 and Rollup Explained">​</a></h3>
<p>We approach the operation of a Rollup-like L2 from two different perspectives.</p>
<p>The first perspective is: <strong>How does L2 achieve security and state finality for the transaction executed?</strong></p>
<p><img decoding="async" loading="lazy" alt="RollupStructure1" src="/assets/images/RollupStructure1-f4cd2cf57ff747092f1185dca3303385.png" width="906" height="446" class="img_ev3q"></p>
<p>L2 (as a Rollup to L1) is a partially independent network that retains some components of its own and inherits/borrows the remaining components from L1. Generally, we consider four typical components:</p>
<ul>
<li>
<p><strong>Consensus</strong>: Consensus forms the foundation and determines within a group of nodes on validity of transations in the network.</p>
</li>
<li>
<p><strong>Execution</strong>: Nodes execute transactions and calculate the transition to a new state from the previous one.</p>
</li>
<li>
<p><strong>Settlement</strong>: Settlement signifies the finality of the state transition for transactions (so that transactions are invocably recorded on a blockchain).</p>
</li>
<li>
<p><strong>Data Availability</strong>: DA represents the publication of data (such as transaction data, ZK Proofs, etc.). Users or other third parties will be able to verify that the transactions executed on L2 and the state transitions are correct based on the data disclosed.</p>
</li>
</ul>
<p>A very typical Rollup is the Smart Contract Rollup on Ethereum. On L2, the Sequencer(s) execute all incoming transactions and &quot;roll up&quot; the transaction data as well as the state transition results to the L1. On L1, all transactions can be re-executed to ensure that the state transition on L2 is valid. In ZK Rollup, we use ZK Proofs to prove the validity of transactions executed on L2, achieving higher data compression rate and better privacy-preserving features.</p>
<p>Such Smart Contract Rollups essentially delegate the execution to L2, alleviating the resource constraints on execution on Ethereum L1. To ensure that execution on L2 can be trusted, Ethereum L1 still bears the responsibilities of Data Availability and Settlement (both backed uy by Ethereum&#x27;s PoS consensus).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="promblems-for-bitcoin">Promblems for Bitcoin<a href="#promblems-for-bitcoin" class="hash-link" aria-label="Direct link to Promblems for Bitcoin" title="Direct link to Promblems for Bitcoin">​</a></h3>
<p>Bitcoin is very different. If we want to achieve Turing-complete smart contract capabilities (like EVM), we need to address the issue that Bitcoin L1 cannot natively verify transactions (or ZK Proofs) from L2 Rollups. This is a big problem. Some solutions attempt to submit commitments of transaction data or ZK Proof data to Bitcoin L1, but at most, this serves as some kind of data attestation. Note that you cannot even directly obtain this data and verify transactions from Bitcoin L1; instead you need to obtain it from a CSV network. This &quot;CSV+Data Attestation&quot; approach cannot achieve satisfactory security level bacause in such case Bitcoin L1 provides almost none of the four key components for the rollup.</p>
<p>The second perspective is more specific on <strong>How do we ensure user actions on L2 and L1-L2 bridging are executed in a secure, minimized-trust way?</strong></p>
<ul>
<li>
<p>From an internal perspective, L2 needs to execute all transactions occurring within L2 and calculate corresponding state transitions.</p>
</li>
<li>
<p>From an external perspective, L2 needs to ensure that bridged assets from L1 to L2 and their withdrawals are secure enough.</p>
</li>
</ul>
<p>We find that the external perspective which requires secure asset bridging between L1 and L2 poses a greater challenge for a Bitcoin L2, because the risk of losing L1 assets is defnitely a huge disaster for any L2 user, and because secure asset bridging on a Bitcoin L2 is way more difficult than that on a Ethereum one.</p>
<p>In an Ethereum Rollup, L1-L2 bridging is of less challenging. An Ethereum L2 will deploy dedicated smart contracts on the L1, which handle deposits of L1 assets and redemption of L2 assets. This can be inherently trustless, or very close to trustless. The only flaw may lie in the risk of malicious contract upgrade and L2 sequencer withholding user requests. Fortunately Ethereum L2s have several measures to mitigate risks, such as contract upgrade waiting period and mandatory withdrawal / escape hatch mechanisms.</p>
<p>In Bitcoin L2, the situation becomes tricky. We cannot deploy a smart contract on Bitcoin L1 to handle asset bridging behavior, leading to Bitcoin being completely unaware of L2&#x27;s status. Therefore, it is inevitable some additional trust assumptions to be introduced for addressing asset bridging risks. This is why BitcoinZK brings a upgradable, minimized-trust zkBridge to its users for safe opt-in to their L2 journey.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-sovereign-style-solution">a Sovereign-style Solution<a href="#a-sovereign-style-solution" class="hash-link" aria-label="Direct link to a Sovereign-style Solution" title="Direct link to a Sovereign-style Solution">​</a></h3>
<p>Based on the challenges outlined for Bitcoin L2, we have considered a Sovereign Rollup solution. In fact, we have not found a way to accurately describe the bitcoinZK solution, but we believe that Sovereign Rollup (more precisely, Sovereign-style Rollup-like) is a relatively close definition.</p>
<p>An L2 implemented as a Sovereign Rollup can strip off several or even all of the four components (Consensus, Execution, DA, Settlement) from L1. The term &quot;sovereign&quot; means that L2 can have independent Consensus and establish DA and Settlement on top of it, rather than relying on L1 consensus. Thus, such sovereign L2 can detach from dependence on L1 for consensus and security and have more flexibility in terms of upgrading mechanism, governance, and customization.</p>
<p><img decoding="async" loading="lazy" alt="RollupStructure2" src="/assets/images/RollupStructure2-541422f325e4379d8259642c94b82911.png" width="1070" height="666" class="img_ev3q"></p>
<p>For ZK Rollup, sovereign L2 brings additional benefits. ZK Proofs can not only be used to verify the results of L2 execution on-chain but also to verify more states or message passing in off-chain or cross-chain scenarios. This will greatly expand the application potential of our Bitcoin L2.</p>
<p>The reasons for adopting sovereign L2 when we take a Bitcoin perspective are more concise and sufficient:</p>
<ul>
<li>Bitcoin cannot natively support Smart Contract Rollups.</li>
<li>L2 cannot directly inherit Bitcoin&#x27;s powerful PoW consensus.</li>
</ul>
<p>These are the most important reasons why we consider a sovereign-style L2 because we can always choose the best alternatives regarding the four key components and preserve more room for future upgrades.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/resources/Zero-knowledge"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Zero-knowledge</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/resources/ZK Asset Bridge"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">zkBridge</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#basic-concepts" class="table-of-contents__link toc-highlight">Basic Concepts</a></li><li><a href="#bitcoinzk-rollup-anatomy" class="table-of-contents__link toc-highlight">BitcoinZK Rollup Anatomy</a><ul><li><a href="#l2-and-rollup-explained" class="table-of-contents__link toc-highlight">L2 and Rollup Explained</a></li><li><a href="#promblems-for-bitcoin" class="table-of-contents__link toc-highlight">Promblems for Bitcoin</a></li><li><a href="#a-sovereign-style-solution" class="table-of-contents__link toc-highlight">a Sovereign-style Solution</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>